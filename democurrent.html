<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Registration Form</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <p class="h1 p-3 mb-2 bg-info text-white">Registration Form</p>
    

    <form id="registrationForm" class="p-3 mb-2 bg-light text-dark">
    <div class="mb-3">
        <label for="fname" class="form-label">Firstname:</label>
        <input type="text" class="form-control form-control-sm" id="fname" name="fname">
        <div id="fnameError" class="text-danger"></div>
      </div>

      <div class="mb-3">
        <label for="lname" class="form-label">Middlename:</label>
        <input type="text" class="form-control form-control-sm" id="lname" name="lname">
        <div id="lnameError" class="text-danger"></div>
      </div>

      <div class="mb-3">
      <label for="myList" class="form-label">
        Course:
      </label>
      <select class="form-select" aria-label="Default select example" id="myList">
        <option value="">Select Course</option> 
        <option value="w3schools">W3schools</option>
        <option value="Javapoint">Javapoint</option>
        <option value="tutorialspoint">Tutorialspoint</option>
        <option value="geeksforgeeks">Geeksforgeeks</option>
      </select><br>
      <div id="myListError" class="text-danger"></div>
    </div>

    <div class="mb-3">

      <label  class="form-label">
        Gender:
      </label>

      <div class="form-check">
        <input class="form-check-input" type="radio" name="gender" id="male"  value="male">
        <label class="form-check-label" for="male">
          Male
        </label>
      </div>

      <div class="form-check">
        <input class="form-check-input" type="radio" name="gender" id="female" value="female">
        <label class="form-check-label" for="female">
          Female
        </label>
      </div>

      <div class="form-check">
        <input class="form-check-input" type="radio" name="gender" id="others"  value="other">
        <label class="form-check-label" for="others">
          Others
        </label>
      </div>
      <div id="genderError" class="text-danger"></div>

    </div>
      <br>

      <div class="mb-3">
        <label for="phone" class="form-label">Phone:</label>
        <input type="tel" class="form-control form-control-sm" id="phone" name="phone" pattern="[0-9]{10}">
        <div id="phoneError" class="text-danger"></div>
      </div>
      

      <div class="mb-3">
        <label for="myEmail" class="form-label">Email:</label>
        <input type="email" class="form-control" id="myEmail">
        <div id="emailError" class="text-danger"></div>
      </div>
     

      <div class="mb-3">
        <label for="password" class="form-label" >Password:</label>
        <input type="password" class="form-control" id="password">
        <div id="passwordError" class="text-danger"></div>
      </div>
      

      <div class="mb-3">
        <label for="password" class="form-label">Re-type Password:</label>
        <input type="password" class="form-control" id="password1">
        <div id="repasswordError" class="text-danger"></div>
      </div>



      <div class="mb-3">
      <div id="message" class="text-danger"></div>
    </div>

      <button type="submit" class="btn btn-primary">Register</button>

      
    </form>


      <table class="table table-dark" id="userTable">
        <thead>
          <tr>
            <th scope="col">Firstname</th>
            <th scope="col">MiddleName</th>
            <th scope="col">Course</th>
            <th scope="col">Gender</th>
            <th scope="col">Phone</th>
            <th scope="col">Email</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>

      <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to proceed?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" id="confirmAction">Confirm</button>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.getElementById("registrationForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission

            var fname = document.getElementById("fname").value.trim();
            console.log(fname, "fname");
            var lname = document.getElementById("lname").value.trim();
            console.log(lname, "lname");
            var course = document.getElementById("myList").value.trim();
            console.log(course, "course");
            var gender = document.querySelector('input[name="gender"]:checked');
            console.log(gender, "gender");
            var phone = document.getElementById("phone").value.trim();
            console.log(phone, "phone");
            var email = document.getElementById("myEmail").value.trim();
            console.log(email, "email");
            var password = document.getElementById("password").value.trim();
            console.log(password, "password");
            var password1 = document.getElementById("password1").value.trim();
            console.log(password1, "password1");

            if (fname === "" ) {
                document.getElementById("fnameError").innerText = "Firstname is required";
                return;
            } else {
                document.getElementById("fnameError").innerText = "";
            }

            if (lname === "" ) {
                document.getElementById("lnameError").innerText = "Middlename is required";
                return;
            } else {
                document.getElementById("lnameError").innerText = "";
            }

            if (course === "" ) {
                document.getElementById("myListError").innerText = "Select a course";
                return;
            } else {
                document.getElementById("myListError").innerText = "";
            }

            
            if (!gender) {
                document.getElementById("genderError").innerText = "Select a gender";
                return;
            } else {
                document.getElementById("genderError").innerText = "";
            }

            if (phone === "" ) {
                document.getElementById("phoneError").innerText = "Phone number is required";
                return;
            } else {
                document.getElementById("phoneError").innerText = "";
            }

            if (email === "" ) {
                document.getElementById("emailError").innerText = "Email is required";
                return;
            } else {
                document.getElementById("emailError").innerText = "";
            }

            if (password === "" ) {
                document.getElementById("passwordError").innerText = "Password is required";
                return;
            } else {
                document.getElementById("passwordError").innerText = "";
            }

            if (password1 === "" ) {
                document.getElementById("repasswordError").innerText = "Renter password";
                return;
            } else {
                document.getElementById("repasswordError").innerText = "";
            }

            if (password.length < 6) {
                alert("Password must be at least 6 characters long.");
                return;
            }

            if (password !== password1) {
                var x=document.getElementById("message").innerHTML = "**Passwords do not match";
                console.log(x, "mssg");
                return;
            }

            document.getElementById("message").innerHTML = "";

            var table = document.getElementById("userTable").getElementsByTagName('tbody')[0];
            console.log(table,"table");
            var newRow = table.insertRow(table.rows.length);
            console.log(newRow, "newRow");
            var cell1 = newRow.insertCell(0);
            console.log(cell1, "cell1");
            var cell2 = newRow.insertCell(1);
            console.log(cell2, "cell2");
            var cell3 = newRow.insertCell(2);
            console.log(cell3, "cell3");
            var cell4 = newRow.insertCell(3);
            console.log(cell4, "cell4");
            var cell5 = newRow.insertCell(4);
            console.log(cell5, "cell5");
            var cell6 = newRow.insertCell(5);
            console.log(cell6, "cell6");
            var cell7 = newRow.insertCell(6);
            console.log(cell7, "cell7");
            var cell8 = newRow.insertCell(7);
            console.log(cell8, "cell8");

            cell1.innerHTML = fname;
            cell2.innerHTML = lname;
            cell3.innerHTML = course;
            cell4.innerHTML = gender.value;
            cell5.innerHTML = phone;
            cell6.innerHTML = email;
            cell7.innerHTML = '<button onclick="openConfirmationModal(\'edit\', this.parentNode.parentNode)">Edit</button>';
            cell8.innerHTML = '<button onclick="openConfirmationModal(\'delete\', this.parentNode.parentNode)">Delete</button>';

            // Clear the form fields
            document.getElementById("registrationForm").reset();
        });


        function openConfirmationModal(action, row) {
            var modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
            var confirmButton = document.getElementById('confirmAction');

            confirmButton.onclick = function() {
                modal.hide();
                if (action === 'edit') {
                    // Handle edit action
                    editRow(row);
                } else if (action === 'delete') {
                    // Handle delete action
                    deleteRow(row);
                }
            };

            // Populate form fields with existing data from the row for edit action
            if (action === 'edit') {
                var cells = row.getElementsByTagName("td");
                document.getElementById("fname").value = cells[0].innerHTML.trim();
                document.getElementById("lname").value = cells[1].innerHTML.trim();
                document.getElementById("myList").value = cells[2].innerHTML.trim();
                var gender = cells[3].innerHTML.trim();
                document.getElementById(gender.toLowerCase()).checked = true;
                document.getElementById("phone").value = cells[4].innerHTML.trim();
                document.getElementById("myEmail").value = cells[5].innerHTML.trim();
            }

            modal.show();
        }

        function editRow(row) {
            var cells = row.getElementsByTagName("td");
            cells[0].innerHTML = document.getElementById("fname").value.trim();
            cells[1].innerHTML = document.getElementById("lname").value.trim();
            cells[2].innerHTML = document.getElementById("myList").value.trim();
            var gender = document.querySelector('input[name="gender"]:checked').value;
            cells[3].innerHTML = gender;
            cells[4].innerHTML = document.getElementById("phone").value.trim();
            cells[5].innerHTML = document.getElementById("myEmail").value.trim();
        }

        function deleteRow(row) {
            row.parentNode.removeChild(row);
        }
      </script>
    
</body>
</html>
